# 🚀发票识别助手上线！一键批量解析发票，导出 Excel + 写入数据库，全自动！

> 📍作者：@Stream Wang  
> 🔗项目来源：Dify Workflow + Python 脚本  
> 🧰关键词：发票OCR、自动化处理、批量识别、PDF转图、数据库写入、PyInstaller打包

---

随着AI和自动化的结合愈发紧密，面对大量发票的人工录入和核对工作，是不是感觉异常枯燥？今天就为大家带来一款实用性极强的开源工具 —— **发票识别助手**！

你只需上传发票 PDF，一键即可实现：
- 🧠 发票信息结构化识别（OCR + LLM）
- 📊 批量导出 Excel 表格
- 🏦 同步写入数据库（MySQL）
- 💡 打包为可执行文件，方便部署运行

下面我们一起看看这个项目是如何构建的吧！

---

## 📌一、项目简介：发票识别自动化全流程

### ✅ 总体流程概览：

1. 用户上传 PDF 发票
2. 将 PDF 转换为图片（使用 `pdf_process` 插件）
3. 图片交给大模型进行关键信息提取（使用 `Qwen2.5-VL-72B-Instruct` 模型）
4. 解析并标准化结构化信息
5. 保存为 Excel + 写入数据库

📎 本项目分为两部分：
- Dify Workflow：构建了自动化识别流程
- Python 脚本：实现批量处理、保存和数据库写入

---

## ⚙️二、Dify Workflow 解构

我们基于 [Dify](https://dify.ai/) 创建了一个名为 **发票识别助手** 的工作流。下面是核心模块一览：

### 🔧 输入模块（Start Node）

- 变量名：`upload`
- 文件类型：支持 PDF、图片格式
- 上传数量：最多支持 5 个文件批量处理

### 🔄 文件类型判断

- 如果是图片：直接送入 LLM 提取发票字段
- 如果是 PDF：先使用 **PDF转PNG工具** 转换为图像，再送入 LLM

### 🧠 LLM 识别模块

模型选用的是：
```yaml
Qwen/Qwen2.5-VL-72B-Instruct
